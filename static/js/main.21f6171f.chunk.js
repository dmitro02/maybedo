(this.webpackJsonptodom=this.webpackJsonptodom||[]).push([[0],{117:function(t,e,n){},127:function(t,e,n){},128:function(t,e,n){},129:function(t,e,n){},130:function(t,e,n){},131:function(t,e,n){},133:function(t,e,n){},138:function(t,e){},140:function(t,e){},151:function(t,e){},153:function(t,e){},180:function(t,e){},182:function(t,e){},183:function(t,e){},188:function(t,e){},190:function(t,e){},209:function(t,e){},221:function(t,e){},224:function(t,e){},228:function(t,e,n){},229:function(t,e,n){},230:function(t,e,n){},231:function(t,e,n){},232:function(t,e,n){},233:function(t,e,n){},234:function(t,e,n){},235:function(t,e,n){"use strict";n.r(e);var r,i=n(1),a=n(2),s=n.n(a),o=n(40),c=n.n(o),u=(n(127),n(7)),l=(n(128),n(129),function(t){var e=t.isDisplayed,n=void 0!==e&&e;return Object(i.jsx)("div",{className:"fog",style:{display:n?"block":"none"}})}),d=(n(130),function(t){return Object(i.jsx)("div",{className:"spinner ".concat(t.customClass||"")})}),f=(n(131),n(11)),b=n(16),h=function(t){return new Promise((function(e,n){var r=new FileReader;r.onerror=n,r.onload=function(){return e(r.result)},r.readAsText(t)}))},v=function(t){for(var e=t&&t>=20?t:20,n="";n.length<e;)n+=Math.floor(1e10*Math.random()).toString();return n.substring(0,t)};!function(t){t[t.Trivial=0]="Trivial",t[t.Minor=1]="Minor",t[t.Normal=2]="Normal",t[t.Major=3]="Major",t[t.Critical=4]="Critical"}(r||(r={}));var j,p=function(){function t(e,n,i,a){Object(f.a)(this,t),this.text=void 0,this.isDone=void 0,this.tasks=void 0,this.priority=void 0,this.isOpened=void 0,this.selectedSubTaskId=void 0,this.isNew=void 0,this.parent=void 0,this.id=void 0,this.id=a||v(),this.text=e,this.isDone=i||!1,this.tasks=[],this.isNew=!1,this.parent=n,this.priority=r.Trivial}return Object(b.a)(t,[{key:"isProject",get:function(){var t;return!(null===(t=this.parent)||void 0===t?void 0:t.parent)}}]),t}(),x=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(a.useEffect)((function(){if(n){var r=function(n){t.current&&!t.current.contains(n.target)&&e()};return document.addEventListener("mousedown",r),function(){return document.removeEventListener("mousedown",r)}}}),[e,n,t])};!function(t){t[t.ShowLoading=0]="ShowLoading",t[t.HideLoading=1]="HideLoading",t[t.ShowBanner=2]="ShowBanner",t[t.SetSyncStatus=3]="SetSyncStatus",t[t.Reload=4]="Reload"}(j||(j={}));var m,O=function(){function t(){Object(f.a)(this,t),this.callbacks=new Map,this._taskList=this.toProxy(new p("Projects",null,!1,"0")),this.updatedAt=0}return Object(b.a)(t,[{key:"setData",value:function(t,e){if(t){var n="string"===typeof t?JSON.parse(t):t;this.setTaskList(n),this.setUpdatedAt(e),this.notifyWithDelay(j.Reload)}}},{key:"subscribe",value:function(t,e){var n=this.callbacks.get(t);n?n.push(e):this.callbacks.set(t,[e])}},{key:"unsubscribe",value:function(t,e){var n=this.callbacks.get(t);if(n){var r=n.filter((function(t){return t!==e}));this.callbacks.set(t,r)}}},{key:"notify",value:function(t,e){var n;null===(n=this.callbacks.get(t))||void 0===n||n.forEach((function(t){return t(e)}))}},{key:"notifyWithDelay",value:function(t,e){var n=this;setTimeout((function(){return n.notify(t,e)}),0)}},{key:"notifyFromProxy",value:function(t){var e=this,n=t.target,r=t.prop;("priority"===r?[n.parent.id,n.id]:"isDone"===r?[n.parent.id]:[n.id]).forEach((function(t){var n;null===(n=e.callbacks.get(t))||void 0===n||n.forEach((function(t){return t()}))}))}},{key:"toProxy",value:function(t){var e=this,n={set:function(t,n,r){if("tasks"===n){var i=r.map((function(t){return void 0!==t.isProxy?t:e.toProxy(t)}));t[n]=i}else t[n]=r;return e.isTrackableProp(n)&&(e.notifyFromProxy({target:t,prop:n,value:r}),e.setUpdatedAt()),!0},get:function(t,e){return"isProxy"===e||t[e]}};return t.tasks=t.tasks.map((function(t){return e.toProxy(t)})),t.parent&&(t.parent=new Proxy(t.parent,n)),new Proxy(t,n)}},{key:"isTrackableProp",value:function(t){return k.includes(t)}},{key:"setUpdatedAt",value:function(t){this.updatedAt=t||Date.now()}},{key:"setTaskList",value:function(t){this.linkTasks(t,null),this._taskList=this.toProxy(t)}},{key:"linkTasks",value:function(t,e){var n=this;t.parent=e,t.tasks&&t.tasks.forEach((function(e){n.linkTasks(e,t)}))}},{key:"taskList",get:function(){return this._taskList}},{key:"taskListJSON",get:function(){var t=["parent","isNew"];return JSON.stringify(this._taskList,(function(e,n){return t.includes(e)?void 0:n}),2)}}]),t}(),k=["text","isDone","tasks","priority","isOpened","selectedSubTaskId"],g=new O,y=g,w=function(t){t.parent.selectedSubTaskId=t.id},S=function(t,e){Object(a.useEffect)((function(){return g.subscribe(t,e),function(){return g.unsubscribe(t,e)}}),[e,t])},C=function(t){var e=function(){var t=Object(a.useState)(0),e=Object(u.a)(t,2),n=(e[0],e[1]);return function(){return n((function(t){return t+1}))}}();Object(a.useEffect)((function(){return g.subscribe(t,e),function(){return g.unsubscribe(t,e)}}),[t])},N=function(){return g.notify(j.ShowLoading)},T=function(){return g.notify(j.HideLoading)},L=function(t){return g.notify(j.ShowBanner,t)},D=function(t){return g.notify(j.SetSyncStatus,t)},E=function(t){var e=t.spinnerClass,n=Object(a.useState)(!1),r=Object(u.a)(n,2),s=r[0],o=r[1];return S(j.ShowLoading,(function(){return o(!0)})),S(j.HideLoading,(function(){return o(!1)})),s?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(l,{isDisplayed:!0}),Object(i.jsx)("div",{className:"loading",children:Object(i.jsx)(d,{customClass:e})})]}):null},A=n(3),I=n.n(A),P=n(6),F=(n(133),n(8));!function(t){t.NotConfigured="NOT_CONFIGURED",t.Idle="IDLE",t.InProgress="IN_PROGRESS",t.Failure="FAILURE"}(m||(m={}));var R,M,_=function(){var t=Object(a.useState)(m.NotConfigured),e=Object(u.a)(t,2),n=e[0],r=e[1];S(j.SetSyncStatus,r);var s=function(){rt.onDemandCloud()},o="material-icons-outlined common-btn",c=o+" no-hover";return Object(i.jsx)("div",{className:"sync-status",children:function(t){switch(t){case m.NotConfigured:return Object(i.jsx)(F.k,{className:c,title:"cloud sync disabled"});case m.Idle:return Object(i.jsx)(F.j,{className:o,onClick:s,title:"synchronize"});case m.InProgress:return Object(i.jsx)(F.j,{className:"material-icons-outlined common-btn no-hover syncing",onClick:s,title:"synchronizing"});case m.Failure:return Object(i.jsx)(F.l,{className:"material-icons-outlined common-btn failure",onClick:s,title:"sync failed"});default:return Object(i.jsx)(F.k,{className:c,title:"cloud sync disabled"})}}(n)})},U=n(118),z=n(65),J=n.n(z),B="https://api.dropbox.com/oauth2/token",W="dropboxAccessToken",H=function(){function t(e){Object(f.a)(this,t),this.clientId=void 0,this.codeVerifier=void 0,this.dropbox=void 0,this.clientId=e,this.codeVerifier=v(43),this.initDropbox()}return Object(b.a)(t,[{key:"check",value:function(){var t=Object(P.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.validateConfiguration(),t.next=3,this.dropbox.checkUser({query:"todom"});case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"authorize",value:function(){var t=Object(P.a)(I.a.mark((function t(){var e,n,r,i,a,s=arguments;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:"",n=new URLSearchParams({code:e,grant_type:"authorization_code",client_id:this.clientId,code_verifier:this.codeVerifier}),t.next=4,J()(B,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n});case 4:return r=t.sent,t.next=7,r.json();case 7:if(i=t.sent,r.ok){t.next=10;break}throw new Error(i.error_description);case 10:a=i.access_token,this.saveAccessTokenToLS(a),this.initDropbox(a);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"listFolder",value:function(){var t=Object(P.a)(I.a.mark((function t(e){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=e||"",this.validateConfiguration(),t.next=4,this.dropbox.filesListFolder({path:e});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"downloadFile",value:function(){var t=Object(P.a)(I.a.mark((function t(e){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.validateConfiguration(),t.next=3,this.dropbox.filesDownload({path:e});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"uploadFile",value:function(){var t=Object(P.a)(I.a.mark((function t(e,n){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.validateConfiguration(),t.next=3,this.dropbox.filesUpload({contents:e,path:n,mode:{".tag":"overwrite"}});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"deleteFile",value:function(){var t=Object(P.a)(I.a.mark((function t(e){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.validateConfiguration(),t.next=3,this.dropbox.filesDeleteV2({path:e});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"initDropbox",value:function(t){var e=t||this.getAccessTokenFromLS();this.dropbox=e?new U.Dropbox({accessToken:e,fetch:J.a}):null}},{key:"saveAccessTokenToLS",value:function(t){localStorage.setItem(W,t)}},{key:"getAccessTokenFromLS",value:function(){return localStorage.getItem(W)}},{key:"validateConfiguration",value:function(){if(!this.dropbox)throw new Error("not_configured")}},{key:"authUrl",get:function(){return"".concat("https://www.dropbox.com/oauth2/authorize","?client_id=").concat(this.clientId,"&response_type=code&code_challenge_method=plain&code_challenge=").concat(this.codeVerifier)}},{key:"isConfigured",get:function(){return!!this.dropbox}}]),t}(),G="/data",V="/metadata.json",q=function(){function t(){Object(f.a)(this,t),this.dropboxClient=void 0,this.syncTarget=R.Dropbox,this.dropboxClient=new H("lxn28fv9hhsn7id")}return Object(b.a)(t,[{key:"authorize",value:function(){var t=Object(P.a)(I.a.mark((function t(e){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.dropboxClient.authorize(e);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"check",value:function(){var t=Object(P.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.dropboxClient.check();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"uploadData",value:function(){var t=Object(P.a)(I.a.mark((function t(e,n){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.uploadMetadata(e);case 2:return t.next=4,this.uploadTaskList(n);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"downloadMetadata",value:function(){var t=Object(P.a)(I.a.mark((function t(){var e,n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.dropboxClient.downloadFile(V);case 3:return e=t.sent,t.next=6,h(e.result.fileBlob);case 6:return n=t.sent,t.abrupt("return",JSON.parse(n));case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",new et);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(){return t.apply(this,arguments)}}()},{key:"uploadMetadata",value:function(){var t=Object(P.a)(I.a.mark((function t(e){var n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.stringify(e),t.next=3,this.dropboxClient.uploadFile(n,V);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"downloadTaskList",value:function(){var t=Object(P.a)(I.a.mark((function t(){var e,n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getLatestExport();case 3:return e=t.sent,t.next=6,h(e.fileBlob);case 6:return n=t.sent,t.abrupt("return",n);case 10:return t.prev=10,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(){return t.apply(this,arguments)}}()},{key:"uploadTaskList",value:function(){var t=Object(P.a)(I.a.mark((function t(e){var n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return n="".concat(G,"/tasklist_").concat((new Date).toISOString(),".json"),t.next=5,this.dropboxClient.uploadFile(e,n);case 5:return t.next=7,this.deleteOldestExports();case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getSortedExports",value:function(){var t=Object(P.a)(I.a.mark((function t(){var e;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.dropboxClient.listFolder(G);case 2:return e=t.sent,t.abrupt("return",e.result.entries.sort((function(t,e){var n=new Date(t.client_modified),r=new Date(e.client_modified);return n<r?-1:n>r?1:0})));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getLatestExport",value:function(){var t=Object(P.a)(I.a.mark((function t(){var e,n,r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSortedExports();case 2:return e=t.sent,n=e.pop().path_lower,t.next=6,this.dropboxClient.downloadFile(n);case 6:return r=t.sent,t.abrupt("return",r.result);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"deleteOldestExports",value:function(){var t=Object(P.a)(I.a.mark((function t(){var e,n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSortedExports();case 2:e=t.sent,n=0;case 4:if(!(n<e.length-10)){t.next=10;break}return t.next=7,this.dropboxClient.deleteFile(e[n].path_lower);case 7:n++,t.next=4;break;case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"authUrl",get:function(){return this.dropboxClient.authUrl}},{key:"isConfigured",get:function(){return this.dropboxClient.isConfigured}}]),t}(),K=function(t,e){e&&($(t),Y(e))},X=function(){var t=localStorage.getItem("updatedAt");return t?parseInt(t):0},$=function(t){localStorage.setItem("updatedAt",t.toString())},Q=function(){var t=localStorage.getItem("taskList");return t&&"=> {}"!==t?t:null},Y=function(t){localStorage.setItem("taskList",t)},Z=function(){return localStorage.getItem("syncTarget")},tt=function(t){localStorage.setItem("syncTarget",t)},et=function t(e){Object(f.a)(this,t),this.updatedAt=void 0,this.updatedAt=e};!function(t){t.Dropbox="DROPBOX",t.Disabled="DISABLED"}(R||(R={})),function(t){t.Local="LOCAL",t.Remote="REMOTE"}(M||(M={}));var nt,rt=new(function(){function t(){Object(f.a)(this,t),this.cloudConnector=null,this.isSyncFaild=!1,this.interval=null,this.onDemandCloud=this.onDemandCloud.bind(this),this.onDemandLocal=this.onDemandLocal.bind(this)}return Object(b.a)(t,[{key:"initSync",value:function(){var t=Object(P.a)(I.a.mark((function t(e,n){var r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(N(),n?(this.cloudConnector=n,tt(n.syncTarget)):(r=Z())===R.Disabled?this.cloudConnector=null:this.cloudConnector=this.createCloudConnector(r),this.resetSync(),!this.cloudConnector){t.next=9;break}return t.next=6,this.check();case 6:t.t0=t.sent,t.next=10;break;case 9:t.t0=!1;case 10:if(!t.t0){t.next=22;break}if(!e){t.next=17;break}return t.next=15,this.forceUpdateFromSource(e);case 15:t.next=19;break;case 17:return t.next=19,this.onLoadCloud();case 19:this.interval=setInterval(this.onDemandCloud,3e5),t.next=24;break;case 22:this.onLoadLocal(),this.interval=setInterval(this.onDemandLocal,3e5);case 24:this.addGlobalEventListeners(),T();case 26:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"resetSync",value:function(){clearInterval(this.interval),this.removeGlobalEventListeners()}},{key:"addGlobalEventListeners",value:function(){window.addEventListener("unload",this.onDemandLocal),window.addEventListener("blur",this.onDemandLocal)}},{key:"removeGlobalEventListeners",value:function(){window.removeEventListener("unload",this.onDemandLocal),window.removeEventListener("blur",this.onDemandLocal)}},{key:"onLoadCloud",value:function(){var t=Object(P.a)(I.a.mark((function t(){var e,n,r,i,a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isSyncFaild=!1,D(m.InProgress),t.next=4,this.getCloudUpdatedAt();case 4:if(e=t.sent,n=X(),!(e>n)){t.next=14;break}return t.next=9,this.getCloudTaskList();case 9:r=t.sent,K(e,r),this.loadToStore(e,r),t.next=23;break;case 14:if(!(e<n)){t.next=22;break}if(!(i=Q())){t.next=20;break}return this.loadToStore(n,i),t.next=20,this.setCloudData({updatedAt:n},i);case 20:t.next=23;break;case 22:e===n?(a=Q(),this.loadToStore(n,a)):this.saveToLS();case 23:this.setSyncResultStatus();case 24:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"forceUpdateFromSource",value:function(){var t=Object(P.a)(I.a.mark((function t(e){var n,r,i,a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isSyncFaild=!1,D(m.InProgress),e!==M.Remote){t.next=13;break}return t.next=5,this.getCloudUpdatedAt();case 5:return n=t.sent,t.next=8,this.getCloudTaskList();case 8:r=t.sent,K(n,r),this.loadToStore(n,r),t.next=18;break;case 13:return this.saveToLS(),i=X(),a=Q(),t.next=18,this.setCloudData({updatedAt:i},a);case 18:this.setSyncResultStatus();case 19:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"onLoadLocal",value:function(){var t=X();if(t){var e=Q();this.loadToStore(t,e)}else this.saveToLS()}},{key:"onDemandCloud",value:function(){var t=Object(P.a)(I.a.mark((function t(){var e,n,r,i;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isSyncFaild=!1,D(m.InProgress),this.saveToLS(),t.next=5,this.getCloudUpdatedAt();case 5:if(e=t.sent,n=X(),!(e>n)){t.next=15;break}return t.next=10,this.getCloudTaskList();case 10:r=t.sent,K(e,r),this.loadToStore(e,r),t.next=20;break;case 15:if(!(e<n)){t.next=20;break}if(!(i=Q())){t.next=20;break}return t.next=20,this.setCloudData({updatedAt:n},i);case 20:this.setSyncResultStatus();case 21:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onDemandLocal",value:function(){this.saveToLS()}},{key:"saveToLS",value:function(){var t=y.updatedAt,e=y.taskListJSON;K(t,e)}},{key:"loadToStore",value:function(t,e){e&&y.setData(e,t)}},{key:"check",value:function(){var t=Object(P.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.cloudConnector.check();case 3:t.next=14;break;case 5:if(t.prev=5,t.t0=t.catch(0),!t.t0.message.toLowerCase().includes("not_configured")){t.next=12;break}return D(m.NotConfigured),t.abrupt("return",!1);case 12:return D(m.Failure),t.abrupt("return",!0);case 14:return t.abrupt("return",!0);case 15:case"end":return t.stop()}}),t,this,[[0,5]])})));return function(){return t.apply(this,arguments)}}()},{key:"getCloudUpdatedAt",value:function(){var t=Object(P.a)(I.a.mark((function t(){var e;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.cloudConnector.downloadMetadata();case 3:return e=t.sent,t.abrupt("return",(null===e||void 0===e?void 0:e.updatedAt)||0);case 7:return t.prev=7,t.t0=t.catch(0),this.isSyncFaild=!0,t.abrupt("return",0);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}()},{key:"getCloudTaskList",value:function(){var t=Object(P.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.cloudConnector.downloadTaskList();case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),this.isSyncFaild=!0,t.abrupt("return",null);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(){return t.apply(this,arguments)}}()},{key:"setCloudData",value:function(){var t=Object(P.a)(I.a.mark((function t(e,n){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,t.t0=n,!t.t0){t.next=5;break}return t.next=5,this.cloudConnector.uploadData(e,n);case 5:t.next=10;break;case 7:t.prev=7,t.t1=t.catch(0),this.isSyncFaild=!0;case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"createCloudConnector",value:function(t){switch(t){case R.Dropbox:return new q;default:return null}}},{key:"setSyncResultStatus",value:function(){this.isSyncFaild?D(m.Failure):D(m.Idle)}}]),t}()),it=(n(117),function(t){var e=t.root,n=Object(a.useRef)(null);Object(a.useEffect)((function(){var t;!window.iAmRunningOnMobile&&(null===(t=n.current)||void 0===t||t.focus())}),[]);return Object(i.jsxs)("div",{className:"record add-record",children:[Object(i.jsx)("div",{className:"row-btns",children:Object(i.jsx)(F.a,{})}),Object(i.jsx)("div",{className:"item-content",contentEditable:"true",suppressContentEditableWarning:!0,onInput:function(t){var n=t.target.textContent.trim();if(n){var r=new p(n,e);r.isNew=!0,function(t){var e=t.parent;e.tasks=e.tasks.concat(t)}(r),r.isProject&&w(r),t.target.textContent=""}},onKeyPress:at,ref:n})]})}),at=function(t){!t.target.textContent.trim()&&"Enter"===t.key&&t.preventDefault()},st=Object(a.memo)(it),ot=function(t){var e=t.task;return Object(i.jsx)(kt,{classNames:["subtasks-list"],root:e})},ct=(n(64),function(t){var e=t.actionOnClick,n=t.isChecked,r=void 0!==n&&n,a=t.priority,s=["common-btn","checkmark-btn",r?"prio-0":"prio-"+a].join(" ");return Object(i.jsx)(i.Fragment,{children:r?Object(i.jsx)(F.c,{className:s,onClick:e}):Object(i.jsx)(F.d,{className:s,onClick:e})})}),ut=n(18),lt=function(t){var e=t.task,n=t.isBulk,r=void 0!==n&&n,s=t.isDisabled,o=void 0!==s&&s,c=t.closeMenu,l=void 0===c?function(){}:c,d=Object(a.useState)(!1),f=Object(u.a)(d,2),b=f[0],h=f[1],v=function(t){t&&t.stopPropagation(),h(!1)},j=Object(a.useRef)(null);x(j,v,b);var p={icon:Object(i.jsx)(ut.a,{}),text:"Delete",tooltip:"Delete task",deleteAction:function(){h(!1),function(t){var e=t.parent;e.tasks=e.tasks.filter((function(e){return e!==t}))}(e)}},m={icon:Object(i.jsx)(ut.b,{}),text:"Clear",tooltip:"Delete completed subtasks",deleteAction:function(){h(!1),function(t){t.tasks=t.tasks.filter((function(t){return!t.isDone}))}(e),l()}},O=r?m:p,k=O.icon,g=O.text,y=O.tooltip,w=O.deleteAction,S=["record-menu-row"];return o&&S.push("disabled"),Object(i.jsx)(i.Fragment,{children:b?Object(i.jsxs)("div",{className:"record-menu-row",ref:j,children:[Object(i.jsx)("div",{className:"inline-menu-btn",children:Object(i.jsx)(F.b,{onClick:w})}),Object(i.jsx)("div",{className:"inline-menu-btn",children:Object(i.jsx)(F.e,{onClick:v})})]}):Object(i.jsxs)("div",{onClick:function(t){t&&t.stopPropagation(),h(!0)},title:y,className:S.join(" "),children:[k,Object(i.jsx)("div",{className:"menu-item-text",children:g})]})})},dt=new Map([[r.Trivial,"Trivial"],[r.Minor,"Minor"],[r.Normal,"Normal"],[r.Major,"Major"],[r.Critical,"Critical"],[void 0,"Trivial"]]),ft=function(t){var e=t.task,n=t.closeMenu,s=Object(a.useState)(!1),o=Object(u.a)(s,2),c=o[0],l=o[1],d=Object(a.useRef)(null);x(d,(function(){return l(!1)}),c);return Object(i.jsx)(i.Fragment,{children:c?Object(i.jsxs)("div",{className:"record-menu-row priority-switch",onClick:function(t){t.stopPropagation();var r=t.target,i=parseInt(r.textContent);i!==e.priority&&(e.priority=i),n()},ref:d,children:[Object(i.jsx)("div",{className:"inline-menu-btn",children:Object(i.jsx)("div",{children:r.Trivial})}),Object(i.jsx)("div",{className:"inline-menu-btn",children:Object(i.jsx)("div",{children:r.Minor})}),Object(i.jsx)("div",{className:"inline-menu-btn",children:Object(i.jsx)("div",{children:r.Normal})}),Object(i.jsx)("div",{className:"inline-menu-btn",children:Object(i.jsx)("div",{children:r.Major})}),Object(i.jsx)("div",{className:"inline-menu-btn",children:Object(i.jsx)("div",{children:r.Critical})})]}):Object(i.jsxs)("div",{className:"record-menu-row",onClick:function(t){t.stopPropagation(),l(!0)},title:"Set task priotity",children:[Object(i.jsx)(ut.d,{className:"menu-item-icon"}),Object(i.jsx)("div",{className:"menu-item-text",children:dt.get(e.priority)})]})})},bt=(n(228),function(t){var e=t.closeMenu,n=t.showSubtasks,r=t.isDisabled,a=["record-menu-row",void 0!==r&&r?"disabled":""].join(" ");return Object(i.jsxs)("div",{className:a,title:"Add subtask",onClick:function(){e(),n()},children:[Object(i.jsx)(ut.c,{className:"menu-item-icon"}),Object(i.jsx)("div",{className:"menu-item-text",children:"Add"})]})}),ht=function(t){var e,n=t.task,r=t.classes,s=void 0===r?[]:r,o=t.showSubtasks,c=t.isProject,l=Object(a.useState)(!1),d=Object(u.a)(l,2),f=d[0],b=d[1],h=function(){return b(!1)},v=Object(a.useRef)(null);x(v,h,f);var j=!!n.tasks.length,p=!!n.tasks.filter((function(t){return t.isDone})).length,m=!n.parent;return Object(i.jsxs)("div",{className:"record-menu-box "+s.join(" "),children:[Object(i.jsx)(F.i,{className:"common-btn",onClick:function(t){t.stopPropagation(),b(!0)}}),f&&Object(i.jsxs)("div",{className:"record-menu",ref:v,onMouseLeave:function(){e=setTimeout(h,500)},onMouseEnter:function(){clearTimeout(e)},children:[!n.isDone&&!m&&Object(i.jsx)(ft,{task:n,closeMenu:h}),!c&&!n.isDone&&!m&&Object(i.jsx)(bt,{closeMenu:h,showSubtasks:o,isDisabled:j}),Object(i.jsx)(lt,{task:n,isBulk:!0,isDisabled:!p||!j,closeMenu:h}),!m&&Object(i.jsx)(lt,{task:n})]})]})},vt=function(t){var e;return function(n){var r=n.target.innerText;clearTimeout(e),e=setTimeout((function(){return t(r)}),700)}},jt=function(t){if(t&&t.isContentEditable){var e;try{var n;e=null===(n=document.getSelection())||void 0===n?void 0:n.getRangeAt(0)}catch(i){}if(e){var r=e.cloneRange();return r.selectNodeContents(t),r.setEnd(e.endContainer,e.endOffset),r.toString().length}}},pt=function(t,e){if(t){var n=document.createRange(),r=window.getSelection(),i=t.childNodes[0];if(i&&i.textContent){var a=i.textContent.length,s=void 0!==e?Math.min(e,a):a;n.setStart(i,s),n.collapse(),null===r||void 0===r||r.removeAllRanges(),null===r||void 0===r||r.addRange(n)}}},xt=function(t){var e=t.task,n=t.isEditable,r=e.isNew,s=e.text,o=Object(a.useRef)(null),c=Object(a.useRef)(void 0);Object(a.useEffect)((function(){var t;r&&(u(!0),pt(o.current,s.length),e.isNew=!1,null===(t=o.current)||void 0===t||t.focus())}),[]),Object(a.useEffect)((function(){document.activeElement===o.current&&pt(o.current,c.current)}));var u=function(t){var e=o.current;null===e||void 0===e||e.setAttribute("contenteditable",""+t)},l=vt((function(t){c.current=jt(o.current),e.text=t}));return Object(i.jsx)("div",{ref:o,className:"item-content",contentEditable:n,suppressContentEditableWarning:!0,onInput:l,onBlur:function(){!n&&u(!1)},children:s})},mt=function(t){var e,n=t.isEditable,r=void 0===n||n,s=t.isTitle,o=void 0!==s&&s,c=t.isSelected,l=void 0!==c&&c,d=t.item,f=t.item,b=f.id,h=f.isDone,v=f.priority,j=f.parent;C(d.id);var p=!!d.tasks.length,x=!(null===(e=d.parent)||void 0===e?void 0:e.parent),m=Object(a.useState)(d.isOpened&&p),O=Object(u.a)(m,2),k=O[0],g=O[1],y=["record",l?"record-selected":"",r?"":"read-only",o?"title":"",x?"project":"",h?"item-done":""].join(" "),S=window.iAmRunningOnMobile?"":"hidden-btn",N=function(){g(!0),d.isOpened=!0},T=function(){g(!1),d.isOpened=!1};return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:y,id:b,onClick:function(){x&&j&&j.selectedSubTaskId!==b&&w(d)},children:[Object(i.jsx)("div",{className:"row-btns",children:Object(i.jsx)(ct,{actionOnClick:function(t){t.stopPropagation(),0===t.button&&(d.isDone=!d.isDone)},isChecked:h,priority:v})}),Object(i.jsx)(xt,{task:d,isEditable:r}),Object(i.jsxs)("div",{className:"row-btns",children:[function(){var t="common-btn subtasks-btn";return p&&!k?Object(i.jsx)(F.g,{onClick:N,className:t}):k?Object(i.jsx)(F.f,{onClick:T,className:t}):null}(),Object(i.jsx)(ht,{task:d,showSubtasks:N,classes:[S],isProject:x})]})]}),k&&Object(i.jsx)(ot,{task:d})]})},Ot=Object(a.memo)(mt),kt=(n(229),function(t){var e=t.classNames,n=void 0===e?[]:e,s=t.root,o=t.hasTitle,c=void 0!==o&&o,u=t.isEditable,l=void 0===u||u,d=s.tasks;C(s.id);d.sort((function(t,e){var n=t.priority||r.Trivial,i=e.priority||r.Trivial;return n>i?-1:n<i?1:0}));var f=d.filter((function(t){return!t.isDone})),b=d.filter((function(t){return t.isDone})),h=Object(a.useRef)(null);return Object(i.jsxs)("div",{className:n.join(" "),children:[c&&Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(Ot,{item:s,isTitle:!0,isEditable:l})}),Object(i.jsx)("div",{className:"active-tasks",ref:h,children:f.map((function(t){return Object(i.jsx)(Ot,{item:t,isEditable:l,isSelected:s.selectedSubTaskId===t.id&&!s.parent},t.id)}))}),Object(i.jsx)(st,{root:s}),!!b.length&&Object(i.jsx)("div",{className:"completed-tasks",children:b.map((function(t){return Object(i.jsx)(Ot,{item:t,isEditable:l,isSelected:s.selectedSubTaskId===t.id&&!s.parent},t.id)}))})]})}),gt=function(t){var e=t.rootTask;return Object(i.jsx)(kt,{classNames:["project-list"],root:e,hasTitle:!0,isEditable:!1})},yt=(n(230),n(41)),wt=function(t){var e=t.isOpened,n=t.close,r=t.isSettingsOpened,s=y.taskList,o=Object(a.useRef)(null);x(o,n,e);var c=["left-panel",e?"panel-opened":"",r?"no-scroll":""].join(" ");return Object(i.jsxs)("div",{ref:o,className:c,onClick:function(t){"false"===t.target.getAttribute("contenteditable")&&n()},children:[Object(i.jsx)(l,{isDisplayed:r}),Object(i.jsx)("div",{className:"top-panel",children:Object(i.jsx)("div",{className:"row-btns",children:Object(i.jsx)(yt.a,{onClick:n,className:"common-btn close-menu-btn",title:"hide projects list"})})}),Object(i.jsx)(gt,{rootTask:s})]})},St=(n(231),function(){var t=Object(a.useState)(null),e=Object(u.a)(t,2),n=e[0],r=e[1],s=function(){return r(null)};if(S(j.ShowBanner,(function(t){return r(t)})),Object(a.useEffect)((function(){n&&n.delay&&n.delay>0&&setTimeout(s,1e3*n.delay)}),[n]),!n)return null;var o=n.text,c=n.type;return Object(i.jsxs)("div",{className:"banner banner-".concat(c),children:[Object(i.jsx)("div",{children:o}),Object(i.jsx)(F.e,{onClick:s})]})});!function(t){t.Success="success",t.Warning="warning",t.Failure="failure"}(nt||(nt={}));var Ct,Nt=function t(e){Object(f.a)(this,t),this.text=void 0,this.type=void 0,this.text=e,this.type=nt.Failure},Tt=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;Object(f.a)(this,t),this.text=void 0,this.type=void 0,this.delay=void 0,this.text=e,this.type=nt.Success,this.delay=n},Lt=function(t){var e=t.action,n=t.classNames,r=void 0===n?[]:n,a=t.title,s=void 0===a?"":a;return Object(i.jsx)(F.h,{className:"common-btn ".concat(r.join(" ")),onClick:function(t){t.stopPropagation(),e()},title:s})},Dt=Object(a.memo)(Lt),Et=(n(232),function(){return Object(i.jsxs)("div",{className:"no-projects-message",children:[Object(i.jsx)(F.d,{}),Object(i.jsx)("span",{children:"Know thyself!"})]})}),At=function(){var t=y.taskList;C(t.id);var e=t.tasks,n=e.length?e.find((function(e){return e.id===t.selectedSubTaskId}))||e[0]:null;return!t.selectedSubTaskId&&n&&(t.selectedSubTaskId=n.id),n?Object(i.jsx)(kt,{classNames:["task-list"],root:n,hasTitle:!0}):null},It=(n(233),n(119));!function(t){t.JSON="json",t.HTML="html"}(Ct||(Ct={}));var Pt=function t(e){var n=e.isDone?'style="text-decoration: line-through"':"",r=e.tasks.length?"<ul>".concat(e.tasks.map((function(e){return t(e)})),"</ul>"):"";return"<li ".concat(n,">").concat(e.text+r,"</li>").replace(/>,</g,"><")},Ft=function(t){var e=(new Date).toISOString();return"todolist_export_".concat(e,".").concat(t)},Rt=function t(e){if(!function(t){var e=t;return void 0!==e.text&&void 0!==e.isDone&&void 0!==e.tasks}(e))return!1;var n,r=Object(It.a)(e.tasks);try{for(r.s();!(n=r.n()).done;){if(!t(n.value))return!1}}catch(i){r.e(i)}finally{r.f()}return!0},Mt=function(t){var e=t.children,n=document.getElementById("portal-root"),r=document.createElement("div");return Object(a.useEffect)((function(){return n.appendChild(r),function(){n.removeChild(r)}}),[r,n]),Object(o.createPortal)(e,r)},_t=n(121),Ut=(n(234),function(t){return function(e){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(l,{isDisplayed:!0}),Object(i.jsx)("div",{className:"modal-container",children:Object(i.jsx)("div",{className:"modal-dialog",children:Object(i.jsx)(t,Object(_t.a)({},e))})})]})}}),zt=n(120),Jt=function(t,e){var n=t.text,r=t.action,a=t.isOutlined,s=void 0!==a&&a,o=t.classNames,c=void 0===o?[]:o,u=["button",s?"outlined-btn":"filled-btn"].concat(Object(zt.a)(c)).join(" ");return Object(i.jsx)("button",{className:u,onClick:r,ref:e,children:n})},Bt=Object(a.forwardRef)(Jt),Wt=Ut((function(t){var e=t.onConfirm,n=t.onCancel,r=Object(a.useRef)(null);return Object(a.useEffect)((function(){setTimeout((function(){var t;return null===(t=r.current)||void 0===t?void 0:t.focus()}),0)})),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{children:"Do you want to overwrite existing data?"}),Object(i.jsxs)("div",{className:"modal-btns",children:[Object(i.jsx)(Bt,{text:"cancel",ref:r,action:n,isOutlined:!0,classNames:["central-btn"]}),Object(i.jsx)(Bt,{text:"ok",action:e})]})]})})),Ht=function(t,e){var n="data:text/".concat(e,";charset=utf-8,").concat(t),r=encodeURI(n),i=document.createElement("a");i.setAttribute("href",r),i.setAttribute("download",Ft(e)),i.click()},Gt=function(t){Ht(function(t){var e=["path","selectedSubTaskPath","parent"];return JSON.stringify(t,(function(t,n){return e.includes(t)?void 0:n}),2)}(t),Ct.JSON)},Vt=function(t){var e=Pt(t),n="<html><head><style>".concat("body { font-family: sans-serif; font-size: 16px; } ul, li { margin-top: 6px }","</style></head><body>").concat(e,"</body></html>");Ht(n,Ct.HTML)},qt=function(t){var e=Object(a.useState)(!1),n=Object(u.a)(e,2),r=n[0],s=n[1],o=y.taskList,c=t.backToTaskList,l=Object(a.useRef)(null),d=Ct.JSON,f=function(){var t=Object(P.a)(I.a.mark((function t(){var e,n,r,i,a,o,u;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=null,t.prev=1,!(r=null===(n=l.current)||void 0===n?void 0:n.files)){t.next=10;break}return t.next=6,h(r[0]);case 6:i=t.sent,e=JSON.parse(i),b(),s(!1);case 10:t.next=19;break;case 12:return t.prev=12,t.t0=t.catch(1),s(!1),a=new Nt("Failed to parse JSON file"),L(a),b(),t.abrupt("return");case 19:if(function(t){if(!t)return!1;var e=t;return void 0!==e.text&&void 0!==e.isDone&&void 0!==e.tasks}(d=e)&&Rt(d)){t.next=23;break}return o=new Nt("Some required fields are missing"),L(o),t.abrupt("return");case 23:y.setData(e,Date.now()),c(),u=new Tt("Data successfully imported",5),L(u);case 27:case"end":return t.stop()}var d}),t,null,[[1,12]])})));return function(){return t.apply(this,arguments)}}(),b=function(){l.current.value=""};return Object(i.jsxs)("div",{className:"settings-block",children:[Object(i.jsx)("h2",{children:"Import/Export your data"}),Object(i.jsx)(Bt,{text:"export",action:function(){switch(d){case Ct.JSON:Gt(o);break;case Ct.HTML:Vt(o);break;default:Gt(o)}}}),Object(i.jsx)("span",{className:"words-between",children:"as"}),Object(i.jsxs)("select",{className:"data-types-select",onChange:function(t){d=t.target.value},children:[Object(i.jsx)("option",{value:Ct.JSON,children:Ct.JSON.toUpperCase()}),Object(i.jsx)("option",{value:Ct.HTML,children:Ct.HTML.toUpperCase()})]}),Object(i.jsx)(Bt,{text:"import json",action:function(){l.current.click()},classNames:["import-btn"]}),Object(i.jsx)("input",{className:"input-hidden",type:"file",accept:".json",onChange:function(){return s(!0)},ref:l}),r&&Object(i.jsx)(Mt,{children:Object(i.jsx)(Wt,{onCancel:function(){b(),s(!1)},onConfirm:function(){f()}})})]})},Kt=n(66),Xt=function(t){var e=t.source,n=new q,r=Object(a.useRef)(null),s=function(){var t=Object(P.a)(I.a.mark((function t(){var i,a,s;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return N(),t.prev=1,t.next=4,n.authorize(null===(i=r.current)||void 0===i?void 0:i.value);case 4:rt.initSync(e,n),a=new Tt("Application successfully authorized"),L(a),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),s=new Nt("Error: "+t.t0.message),L(s);case 13:T();case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("h3",{children:["Connect Dropbox",n.isConfigured?Object(i.jsx)("span",{className:"is-authorized already-authorized",title:"Already configured",children:"\u2714"}):Object(i.jsx)("span",{className:"is-authorized not-authorized",title:"Not configured",children:"!"})]}),Object(i.jsxs)("div",{className:"dropbox-flow",children:[Object(i.jsx)(Bt,{text:"get code",action:function(){return window.open(n.authUrl,"_blank")}}),Object(i.jsx)(Kt.a,{className:"arrow-right"}),Object(i.jsx)("input",{type:"text",size:48,placeholder:"insert authorizarion code here",ref:r,className:"auth-code"}),Object(i.jsx)(Kt.a,{className:"arrow-right"}),Object(i.jsx)(Bt,{text:"authorize",action:s})]})]})},$t=Ut((function(t){var e=t.onCancel,n=t.onLocal,r=t.onRemote,s=Object(a.useRef)(null);return Object(a.useEffect)((function(){setTimeout((function(){var t;return null===(t=s.current)||void 0===t?void 0:t.focus()}),0)})),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{children:"Select initial data source"}),Object(i.jsxs)("div",{className:"modal-btns",children:[Object(i.jsx)(Bt,{text:"cancel",ref:s,action:e,isOutlined:!0}),Object(i.jsx)(Bt,{text:"remote",action:r,classNames:["central-btn"]}),Object(i.jsx)(Bt,{text:"local",action:n})]})]})}));var Qt=function(){var t={target:Z(),dataSource:void 0},e=Object(a.useState)(t),n=Object(u.a)(e,2),r=n[0],s=n[1],o=Object(a.useState)(!1),c=Object(u.a)(o,2),l=c[0],d=c[1],f=Object(a.useState)(!1),b=Object(u.a)(f,2),h=b[0],v=b[1],p=Object(a.useRef)(r.target);S(j.SetSyncStatus,(function(t){var e=t===m.InProgress;v(e)}));var x=function(t){var e=p.current;s({target:e,dataSource:t}),tt(e),rt.initSync(t),d(!1)};return Object(i.jsxs)("div",{className:"settings-block",children:[Object(i.jsx)("h2",{children:"Cloud Synchronization"}),Object(i.jsxs)("select",{disabled:h,value:r.target,onChange:function(t){var e=t.target.value;p.current=e,e===R.Disabled?(s({target:e,dataSource:void 0}),tt(e),D(m.NotConfigured),rt.initSync()):d(!0)},children:[Object(i.jsx)("option",{value:R.Disabled,children:"Disabled"}),Object(i.jsx)("option",{value:R.Dropbox,children:"Dropbox"})]}),function(){var t=r.target,e=r.dataSource;switch(t){case R.Dropbox:return Object(i.jsx)(Xt,{source:e});default:return null}}(),l&&Object(i.jsx)(Mt,{children:Object(i.jsx)($t,{onCancel:function(){d(!1)},onLocal:function(){x(M.Local)},onRemote:function(){x(M.Remote)}})})]})},Yt=function(t){var e=t.backToTaskList;return Object(i.jsxs)("div",{className:"settings",children:[Object(i.jsx)(qt,{backToTaskList:e}),Object(i.jsx)("div",{className:"divider"}),Object(i.jsx)(Qt,{})]})},Zt=function(t){var e=t.isSettingsOpened,n=t.isSidebarOpened,r=t.openSidebar,a=t.toggleSettings,s=!!y.taskList.tasks.length;return Object(i.jsxs)("div",{className:"right-panel",children:[Object(i.jsx)(l,{isDisplayed:n}),Object(i.jsx)(St,{}),Object(i.jsxs)("div",{className:"top-panel",children:[!e&&Object(i.jsx)("div",{className:"row-btns",children:Object(i.jsx)(Dt,{action:r,classNames:["open-menu-btn"],title:"open projects list"})}),Object(i.jsxs)("div",{className:"row-btns",children:[Object(i.jsx)(_,{}),e?Object(i.jsx)(yt.a,{className:"common-btn close settings",onClick:a,title:"close settings"}):Object(i.jsx)(ut.e,{className:"common-btn ",onClick:a,title:"settings"})]})]}),Object(i.jsx)("div",{className:"right-content",children:e?Object(i.jsx)(Yt,{backToTaskList:a}):Object(i.jsx)(At,{})}),!s&&!e&&Object(i.jsx)(Et,{})]})},te=function(){var t=Object(a.useState)(!1),e=Object(u.a)(t,2),n=e[0],r=e[1],s=Object(a.useState)(!1),o=Object(u.a)(s,2),c=o[0],l=o[1];Object(a.useEffect)((function(){rt.initSync()}),[]),C(j.Reload);var d=function t(){l(!1),window.removeEventListener("resize",t)};return Object(i.jsxs)("div",{className:"main-container".concat(c?" sidebar-opened":""),children:[Object(i.jsx)(E,{}),Object(i.jsx)(wt,{isOpened:c,close:d,isSettingsOpened:n}),Object(i.jsx)(Zt,{isSettingsOpened:n,isSidebarOpened:c,toggleSettings:function(){return r(!n)},openSidebar:function(){l(!0),!window.iAmRunningOnMobile&&window.addEventListener("resize",d)}})]})};window.iAmRunningOnMobile=function(){if(navigator.maxTouchPoints)return navigator.maxTouchPoints>0;if(navigator.msMaxTouchPoints)return navigator.msMaxTouchPoints>0;var t=window.matchMedia&&matchMedia("(pointer:coarse)");return t&&"(pointer:coarse)"===t.media?!!t.matches:"orientation"in window||(/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(navigator.userAgent)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(navigator.userAgent))}();var ee=function(){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{id:"portal-root"}),Object(i.jsx)(te,{})]})},ne=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function re(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}c.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(ee,{})}),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/todom",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/todom","/service-worker.js");ne?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):re(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):re(e,t)}))}}()},64:function(t,e,n){}},[[235,1,2]]]);
//# sourceMappingURL=main.21f6171f.chunk.js.map